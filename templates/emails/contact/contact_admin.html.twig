{# templates/emails/contact/contact_admin.html.twig #}
<!DOCTYPE html>
<html lang="fr" xmlns="http://www.w3.org/1999/xhtml" xmlns:o="urn:schemas-microsoft-com:office:office">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="x-apple-disable-message-reformatting">
    <title>Ouverture de ticket: {{ data.translated_subject }}</title>
    <!--[if mso]>
    <noscript>
        <xml>
            <o:OfficeDocumentSettings>
                <o:PixelsPerInch>96</o:PixelsPerInch>
            </o:OfficeDocumentSettings>
        </xml>
    </noscript>
    <![endif]-->
    <style>
        table, td, div, h1, p {font-family: Arial, sans-serif;}
        table, td {border: none;}
        h1, h2, h3, h4, p {margin: 0;}

        :root {
            color-scheme: light dark;
            supported-color-schemes: light dark;
            --color-bg: #f2f3f8;
            --color-surface: #ffffff;
            --color-text: #363636;
            --color-heading: #1a1a1a;
            --color-primary: #4a90e2;
            --color-subtle-bg: #f9f9f9;
            --color-subtle-text: #555555;
            --color-border: #e9e9e9;
            --color-danger: #e53e3e;
            --color-footer-text: #999999;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --color-bg: #1a1a1a;
                --color-surface: #2b2b2b;
                --color-text: #e1e1e1;
                --color-heading: #ffffff;
                --color-subtle-bg: #3c3c3c;
                --color-subtle-text: #bbbbbb;
                --color-border: #444444;
                --color-footer-text: #777777;
            }
        }

        /* === BLOC RESPONSIVE AJOUTÉ ICI === */
        @media screen and (max-width: 600px) {
            .details-table .label-cell,
            .details-table .value-cell {
                display: block !important;
                width: 100% !important;
                box-sizing: border-box !important;
            }
            .details-table .label-cell {
                padding: 15px 0 0 0 !important; /* Espace au-dessus de chaque label */
                font-weight: bold;
            }
            .details-table .value-cell {
                padding: 4px 0 10px 0 !important; /* Petit espace au-dessus, plus grand en dessous */
            }
        }
        /* === FIN DU BLOC RESPONSIVE === */
    </style>
</head>
<body style="margin:0;padding:0;word-spacing:normal;background-color:var(--color-bg);">
    <div role="article" aria-roledescription="email" lang="fr" style="text-size-adjust:100%;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;background-color:var(--color-bg);">
        <table role="presentation" style="width:100%;border:none;border-spacing:0;">
            <tr>
                <td align="center" style="padding:10px;">
                    <!--[if mso]>
                    <table role="presentation" align="center" style="width:600px;">
                    <tr>
                    <td>
                    <![endif]-->
                    <table role="presentation" style="width:100%;max-width:600px;border:none;border-spacing:0;text-align:left;font-family:Arial,sans-serif;font-size:16px;line-height:22px;">
                        
                        <tr>
                            <td style="padding:40px 30px 20px 30px;text-align:center;">
                                <img src="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%2248%22 height=%2248%22 viewBox=%220 0 24 24%22 fill=%22none%22 stroke=%22%234a90e2%22 stroke-width=%222%22 stroke-linecap=%22round%22 stroke-linejoin=%22round%22><path d=%22M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z%22></path><polyline points=%2222,6 12,13 2,6%22></polyline></svg>" width="48" alt="" style="width:48px;max-width:100%;height:auto;border:none;text-decoration:none;color:var(--color-primary);">
                            </td>
                        </tr>

                        <tr>
                            <td style="padding:35px 30px 15px 30px;background-color:var(--color-surface);border-radius:12px 12px 0 0;">
                                <h1 style="color:var(--color-heading);margin-bottom:16px;font-size:26px;font-weight:bold;text-align: center;">Ouverture de ticket</h1>
                                <p style="margin:0;text-align: center;color:var(--color-text);">Une nouvelle demande a été soumise.</p>
                            </td>
                        </tr>

                        <tr>
                            <td style="padding:20px 30px;background-color:var(--color-surface);">
                                <h2 style="font-size: 18px; font-weight: bold; color: var(--color-heading); border-bottom: 2px solid var(--color-border); padding-bottom: 10px; margin-bottom: 10px;">
                                    Détails de la demande
                                </h2>
                                <!-- On ajoute la classe "details-table" pour la cibler en CSS -->
                                <table role="presentation" class="details-table" style="width:100%;border:none;border-spacing:0;">
                                    <tr>
                                        <!-- On ajoute des classes pour chaque cellule -->
                                        <td class="label-cell" style="padding:10px 10px 10px 0;width:30%;font-weight:bold;color:var(--color-subtle-text);vertical-align:top;">De :</td>
                                        <td class="value-cell" style="padding:10px 0;width:70%;color:var(--color-text);vertical-align:top;"><a href="mailto:{{ data.email }}" style="color:var(--color-primary);text-decoration:none;">{{ data.email }}</a></td>
                                    </tr>
                                    <tr>
                                        <td class="label-cell" style="padding:10px 10px 10px 0;width:30%;font-weight:bold;color:var(--color-subtle-text);vertical-align:top;">Sujet :</td>
                                        <td class="value-cell" style="padding:10px 0;width:70%;color:var(--color-text);vertical-align:top;">{{ data.translated_subject }}</td>
                                    </tr>
                                    {% if data.priority is not null %}
                                    <tr>
                                        <td class="label-cell" style="padding:10px 10px 10px 0;width:30%;font-weight:bold;color:var(--color-subtle-text);vertical-align:top;">Priorité :</td>
                                        <td class="value-cell" style="padding:10px 0;width:70%;vertical-align:top;{% if data.priority == 'Bloquant' %}color:var(--color-danger);font-weight:bold;{% else %}color:var(--color-text);{% endif %}">{{ data.priority }}</td>
                                    </tr>
                                    {% endif %}
                                    {% if data.subject == 'access' %}
                                    <tr>
                                        <td class="label-cell" style="padding:10px 10px 10px 0;width:30%;font-weight:bold;color:var(--color-subtle-text);vertical-align:top;">Nom :</td>
                                        <td class="value-cell" style="padding:10px 0;width:70%;color:var(--color-text);vertical-align:top;">{{ data.lastName }}</td>
                                    </tr>
                                    <tr>
                                        <td class="label-cell" style="padding:10px 10px 10px 0;width:30%;font-weight:bold;color:var(--color-subtle-text);vertical-align:top;">Prénom :</td>
                                        <td class="value-cell" style="padding:10px 0;width:70%;color:var(--color-text);vertical-align:top;">{{ data.firstName }}</td>
                                    </tr>
                                    <tr>
                                        <td class="label-cell" style="padding:10px 10px 10px 0;width:30%;font-weight:bold;color:var(--color-subtle-text);vertical-align:top;">Téléphone :</td>
                                        <td class="value-cell" style="padding:10px 0;width:70%;color:var(--color-text);vertical-align:top;">{{ data.full_phone }}</td>
                                    </tr>
                                        {% if data.companyName %}
                                        <tr>
                                            <td class="label-cell" style="padding:10px 10px 10px 0;width:30%;font-weight:bold;color:var(--color-subtle-text);vertical-align:top;">Entreprise :</td>
                                            <td class="value-cell" style="padding:10px 0;width:70%;color:var(--color-text);vertical-align:top;">{{ data.companyName }}</td>
                                        </tr>
                                        {% endif %}
                                    {% endif %}
                                </table>
                            </td>
                        </tr>

                        <tr>
                            <td style="padding:20px 30px 30px 30px;background-color:var(--color-surface);border-radius:0 0 12px 12px;">
                                <h2 style="font-size: 18px; font-weight: bold; color: var(--color-heading); border-bottom: 2px solid var(--color-border); padding-bottom: 10px; margin-bottom: 20px;">
                                    Message
                                </h2>
                                <div style="background-color:var(--color-subtle-bg); border-radius: 8px; padding: 20px; font-size: 15px; line-height: 24px; color:var(--color-text);">
                                    {{ data.message|nl2br }}
                                </div>
                            </td>
                        </tr>

                        <tr>
                            <td style="padding:30px;text-align:center;font-size:12px;color:var(--color-footer-text);">
                                <p style="margin:0;">Cet e-mail a été envoyé automatiquement depuis le formulaire de contact.</p>
                            </td>
                        </tr>

                    </table>
                    <!--[if mso]>
                    </td>
                    </tr>
                    </table>
                    <![endif]-->
                </td>
            </tr>
        </table>
    </div>
</body>
</html>